<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>
  </head>

  <style>
    .hidden {
      display: none;
    }
  </style>
  <body>
    <div id="dashboard">
      <h1>Question <span style="color: crimson">!</span></h1>
      <button onclick="startGame()">Start Quiz</button>
    </div>

    <div id="Quiz" class="hidden">
      <h2 id="question"></h2>
      <input type="radio" name="choices" data-id="0" id="choice0" />
      <label for="choice0" id="choiceText0"></label><br />

      <input type="radio" name="choices" data-id="1" id="choice0" />
      <label for="choice1" id="choiceText1"></label><br />

      <input type="radio" name="choices" data-id="2" id="choice0" />
      <label for="choice2" id="choiceText2"></label><br />

      <input type="radio" name="choices" data-id="3" id="choice0" />
      <label for="choice3" id="choiceText3"></label><br /><br />
      <button onclick="nextQuestion()">Next</button>
    </div>

    <div class="hidden" id="closing">
      <h1>Yeayy selesai</h1>
      <h2 id="scoreText"></h2>
    </div>
    <script>
      // =============== data ===============
      const DB_QUIZ = [
        {
          question: "What is SK ? ",
          answers: ["SIkomo", "Sekolah Koding", "Sayur Ketipat", "Saya ketimpa"],
        },
        {
          question: "I + I = ? ",
          answers: ["II", "dua", "two", "2"],
        },
        {
          question: "What is programmer ? ",
          answers: ["Brive and never give up", "Wakeness", "What?", "I don't know"],
        },
        {
          question: "2 * 2 = ? ",
          answers: ["4", "1", "-4", "I don't know"],
        },
        {
          question: "Who am i ? ",
          answers: ["Andy", "Remond", "Flory", "I don't know"],
        },
      ];

      const CORRECT_ANSWER = [1, 3, 0, 0, 3];

      // =============== Setup Question ===============

      let current_q = 0;
      let total_Score = 0;
      let save_Answer = [];

      function startGame() {
        document.getElementById("dashboard").style.display = "none";
        document.getElementById("Quiz").style.display = "block";
      }

      document.addEventListener("DOMContentLoaded", function (event) {
        setupQuestion();
      });

      function setupQuestion() {
        document.getElementById("question").innerHTML = DB_QUIZ[current_q]["question"];
        document.getElementById("choiceText0").innerHTML = DB_QUIZ[current_q]["answers"][0];
        document.getElementById("choiceText1").innerHTML = DB_QUIZ[current_q]["answers"][1];
        document.getElementById("choiceText2").innerHTML = DB_QUIZ[current_q]["answers"][2];
        document.getElementById("choiceText3").innerHTML = DB_QUIZ[current_q]["answers"][3];
      }

      function nextQuestion() {
        current_q++;

        saveAnswer();

        if (current_q > DB_QUIZ.length - 1) stopQuiz();

        resetState();
        setupQuestion();
      }

      function resetState() {
        document.querySelector('input[name="choices"]:checked').checked = false;
      }

      function stopQuiz() {
        checkScore();
        document.getElementById("Quiz").style.display = "none";
        document.getElementById("closing").style.display = "block";
        document.getElementById("scoreText").innerHTML = total_Score;
        return;
      }

      function saveAnswer() {
        const answer = document.querySelector('input[name="choices"]:checked');
        if (answer != null) {
          save_Answer.push(parseInt(answer.getAttribute("data-id")));
        } else {
          save_Answer.push(0);
        }
      }

      function checkScore() {
        for (i = 0; i < save_Answer.length; i++) {
          if (save_Answer[i] == CORRECT_ANSWER[i]) total_Score += DB_QUIZ.length * 4;
        }
      }
    </script>
  </body>
</html>
